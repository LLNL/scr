
# Function to configure binaries (file.in -> file) and install into bin directory
# Called from the subdirectories added below
FUNCTION(SCR_INSTALL_BIN file)
	CONFIGURE_FILE(${file}.in ${file} @ONLY)
	SET_SOURCE_FILES_PROPERTIES(${CMAKE_CURRENT_SOURCE_DIR}/${file}.in PROPERTIES GENERATED FALSE)
	SET_SOURCE_FILES_PROPERTIES(${CMAKE_CURRENT_BINARY_DIR}/${file} PROPERTIES GENERATED TRUE)

	INSTALL(PROGRAMS ${CMAKE_CURRENT_BINARY_DIR}/${file} DESTINATION bin)
ENDFUNCTION(SCR_INSTALL_BIN file)


# Common Binaries
ADD_SUBDIRECTORY(common)


# Binaries which depend on the resource manager

IF(${SCR_RESOURCE_MANAGER} STREQUAL "SLURM")
	ADD_SUBDIRECTORY(TLCC)
ENDIF(${SCR_RESOURCE_MANAGER} STREQUAL "SLURM")

IF(${SCR_RESOURCE_MANAGER} STREQUAL "APRUN")
	ADD_SUBDIRECTORY(cray_xt)
ENDIF(${SCR_RESOURCE_MANAGER} STREQUAL "APRUN")

IF(${SCR_RESOURCE_MANAGER} STREQUAL "PMIx")
	ADD_SUBDIRECTORY(PMIX)
ENDIF(${SCR_RESOURCE_MANAGER} STREQUAL "PMIx")

IF(${SCR_RESOURCE_MANAGER} STREQUAL "LSF")
	ADD_SUBDIRECTORY(LSF)
ENDIF(${SCR_RESOURCE_MANAGER} STREQUAL "LSF")
